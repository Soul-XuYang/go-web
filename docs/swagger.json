{
    "swagger": "2.0",
    "info": {
        "description": "Go-Web 综合性Web应用接口文档",
        "title": "Go-Web项目 API",
        "contact": {},
        "version": "0.0.1"
    },
    "basePath": "/api",
    "paths": {
        "/ad": {
            "get": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Me"
                ],
                "summary": "获取作者博客广告",
                "responses": {
                    "200": {
                        "description": "示例：{\\\"author_url\\\":\\\"https://...\\\"}",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/articles": {
            "get": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Articles"
                ],
                "summary": "获取全部文章",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/controllers.ArticleResp"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/calculator/calculate": {
            "post": {
                "description": "支持基本的四则运算，包括小数点计算",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "计算器"
                ],
                "summary": "计算器计算",
                "parameters": [
                    {
                        "description": "计算表达式",
                        "name": "expression",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.CalculatorRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/controllers.CalculatorResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/create_articles": {
            "post": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Articles"
                ],
                "summary": "创建文章",
                "parameters": [
                    {
                        "description": "创建文章参数",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.CreateArticleDTO"
                        }
                    }
                ],
                "responses": {
                    "201": {
                        "description": "Created",
                        "schema": {
                            "$ref": "#/definitions/controllers.ArticleResp"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/game/2048/save": {
            "post": {
                "description": "保存用户的2048游戏分数到数据库",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "游戏"
                ],
                "summary": "保存2048游戏分数",
                "parameters": [
                    {
                        "description": "游戏分数",
                        "name": "score",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.Game2048SaveRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/game/leaderboard/me": {
            "get": {
                "security": [
                    {
                        "ApiKeyAuth": []
                    }
                ],
                "description": "返回指定游戏的公共排行榜Top10和当前用户在该游戏中的成绩与排名\n不传game参数时，返回所有游戏的排行榜和个人数据\n传game参数时，只返回指定游戏的排行榜和个人数据",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "游戏排行榜"
                ],
                "summary": "获取游戏排行榜及个人排名",
                "parameters": [
                    {
                        "type": "string",
                        "description": "游戏代号（可选值：guess_game, map_game, 2048_game）不传则返回所有游戏",
                        "name": "game",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "返回单个游戏排行榜（传game参数）",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "game": {
                                    "type": "string"
                                },
                                "leaderboard": {
                                    "type": "array",
                                    "items": {
                                        "$ref": "#/definitions/controllers.LBEntry"
                                    }
                                },
                                "my_rank": {
                                    "type": "object",
                                    "properties": {
                                        "best": {
                                            "type": "integer"
                                        },
                                        "rank": {
                                            "type": "integer"
                                        },
                                        "user_id": {
                                            "type": "integer"
                                        },
                                        "username": {
                                            "type": "string"
                                        }
                                    }
                                }
                            }
                        }
                    },
                    "400": {
                        "description": "无效的游戏代号",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "401": {
                        "description": "未授权",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "type": "object",
                            "properties": {
                                "error": {
                                    "type": "string"
                                }
                            }
                        }
                    }
                }
            }
        },
        "/api/game/map/complete": {
            "post": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Game"
                ],
                "summary": "完成地图游戏",
                "responses": {
                    "200": {
                        "description": "响应数据",
                        "schema": {
                            "$ref": "#/definitions/controllers.completeMapGameResp"
                        }
                    }
                }
            }
        },
        "/api/game/map/display": {
            "get": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "description": "根据choice参数生成不同算法的地图并返回最优路径\nchoice=1: 递归路径生成算法（简单随机路径，适合初学者）\nchoice=2: Prim迷宫生成算法（中等难度，生成随机迷宫）\nchoice=3: DFS深度优先迷宫算法（困难难度，生成复杂迷宫）\n前端建议：使用三个按钮分别对应三种算法，按钮文字可为\"简单路径\"、\"Prim迷宫\"、\"DFS迷宫\"",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Game"
                ],
                "summary": "地图游戏可视化展示 - 支持三种地图生成算法",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "地图生成算法选择: 1=递归路径, 2=Prim迷宫, 3=DFS迷宫",
                        "name": "choice",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "返回地图数据、起终点、最优路径",
                        "schema": {
                            "$ref": "#/definitions/controllers.DisplayResp"
                        }
                    },
                    "400": {
                        "description": "无效的choice参数",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/game/map/reset": {
            "post": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Game"
                ],
                "summary": "重置地图游戏状态",
                "responses": {
                    "200": {
                        "description": "响应数据",
                        "schema": {
                            "$ref": "#/definitions/controllers.resetMapGameResp"
                        }
                    }
                }
            }
        },
        "/api/game/map/start": {
            "post": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Game"
                ],
                "summary": "开始地图游戏",
                "responses": {
                    "200": {
                        "description": "响应数据",
                        "schema": {
                            "$ref": "#/definitions/controllers.startMapGameResp"
                        }
                    }
                }
            }
        },
        "/api/gameguess": {
            "post": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Game"
                ],
                "summary": "猜数字游戏",
                "parameters": [
                    {
                        "description": "请求参数",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.guessReq"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "响应数据",
                        "schema": {
                            "$ref": "#/definitions/controllers.guessResp"
                        }
                    }
                }
            }
        },
        "/api/rmb-top10": {
            "get": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Exchange"
                ],
                "summary": "读取当前人民币对Top10地区的汇率快照（来自 Redis）",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "array",
                            "items": {
                                "type": "object",
                                "additionalProperties": true
                            }
                        }
                    }
                }
            }
        },
        "/api/translate": {
            "post": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "description": "使用AI模型翻译文本，支持自动检测源语言，翻译结果会保存到历史记录",
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Translation"
                ],
                "summary": "翻译文本",
                "parameters": [
                    {
                        "description": "翻译请求参数",
                        "name": "request",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.TranslationRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "翻译成功响应",
                        "schema": {
                            "$ref": "#/definitions/controllers.TranslationResponse"
                        }
                    },
                    "400": {
                        "description": "请求参数错误",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "429": {
                        "description": "服务繁忙，请稍后重试",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "服务器内部错误",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/translate/history": {
            "get": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "description": "分页查询当前用户的翻译历史记录",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Translation"
                ],
                "summary": "获取翻译历史记录",
                "parameters": [
                    {
                        "type": "integer",
                        "default": 1,
                        "description": "页码，默认为1",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "default": 10,
                        "description": "每页记录数，默认10，最大100",
                        "name": "page_size",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "历史记录列表及分页信息",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "401": {
                        "description": "用户未授权",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "查询失败",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/translate/history/clear": {
            "delete": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "description": "删除当前用户的所有翻译历史记录",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Translation"
                ],
                "summary": "清空翻译历史记录",
                "responses": {
                    "200": {
                        "description": "清空成功消息",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "401": {
                        "description": "用户未授权",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "清空失败",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/translate/history/{id}": {
            "delete": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "description": "根据记录ID删除当前用户的一条翻译历史记录",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Translation"
                ],
                "summary": "删除指定翻译历史记录",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "历史记录ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "删除成功消息",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "无效的ID参数",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "401": {
                        "description": "用户未授权",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "记录不存在",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "删除失败",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/translate/languages": {
            "get": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "description": "返回翻译服务支持的所有语言及其代码",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Translation"
                ],
                "summary": "获取支持的语言列表",
                "responses": {
                    "200": {
                        "description": "语言代码与名称的映射表",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/update_articles/{id}": {
            "put": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Articles"
                ],
                "summary": "更新文章数据",
                "parameters": [
                    {
                        "type": "string",
                        "description": "文章ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "description": "更新文章参数",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.UpdateArticleDTO"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/controllers.ArticleResp"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/weather/top10": {
            "get": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "description": "并行获取10个热门城市的天气数据，包括温度、天气状况、空气质量等信息",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Weather"
                ],
                "summary": "获取热门城市天气",
                "responses": {
                    "200": {
                        "description": "10个城市的天气数据数组",
                        "schema": {
                            "type": "array",
                            "items": {
                                "$ref": "#/definitions/controllers.CitySummary"
                            }
                        }
                    },
                    "401": {
                        "description": "用户未授权",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/api/weather/user": {
            "get": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "description": "返回当前用户的名称、位置信息及对应城市的天气数据",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Weather"
                ],
                "summary": "获取用户信息及天气",
                "responses": {
                    "200": {
                        "description": "用户信息、位置和天气数据",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "401": {
                        "description": "用户未授权",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "500": {
                        "description": "获取失败",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/auth/login": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Auth"
                ],
                "summary": "用户登录",
                "parameters": [
                    {
                        "description": "登录参数",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.LoginDTO"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "token,result_url",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/auth/register": {
            "post": {
                "consumes": [
                    "application/json"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Auth"
                ],
                "summary": "用户注册",
                "parameters": [
                    {
                        "description": "注册参数",
                        "name": "body",
                        "in": "body",
                        "required": true,
                        "schema": {
                            "$ref": "#/definitions/controllers.LoginDTO"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/exchangeRates": {
            "post": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Me"
                ],
                "summary": "获取当前汇率数据",
                "responses": {
                    "200": {
                        "description": "示例：{\\\"username\\\":\\\"alice\\\"}",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/files/lists": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "支持按关键字、扩展名、MIME、时间范围、大小范围筛选，分页返回；按 created_at 排序。",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Files"
                ],
                "summary": "列出当前用户的文件",
                "parameters": [
                    {
                        "type": "string",
                        "description": "关键字（匹配文件名，模糊）",
                        "name": "q",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "扩展名（如 .pdf/.png，不区分大小写）",
                        "name": "ext",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "MIME 前缀（如 image/、application/pdf）",
                        "name": "content_type",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "起始日期（YYYY-MM-DD）",
                        "name": "date_from",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "结束日期（YYYY-MM-DD，含当日）",
                        "name": "date_to",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "最小大小（字节）",
                        "name": "min_size",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "最大大小（字节）",
                        "name": "max_size",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "页码（默认1）",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "每页的条数（默认20，最大100）",
                        "name": "page_size",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "排序：共四种组合，两种排序方式-上传日期和文件大小 created_desc（默认）/created_asc/size_desc/size_asc",
                        "name": "order",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/controllers.ListFilesResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/files/upload": {
            "post": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "使用相对路径存储；服务端校验扩展名/MIME、配额，写入相对目录（基于 CWD 的 config.AppConfig.Upload.Storagepath），并保存元信息到数据库。",
                "consumes": [
                    "multipart/form-data"
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Files"
                ],
                "summary": "上传文件",
                "parameters": [
                    {
                        "type": "file",
                        "description": "文件（必填）",
                        "name": "file",
                        "in": "formData",
                        "required": true
                    },
                    {
                        "type": "string",
                        "description": "文件描述/备注",
                        "name": "content",
                        "in": "formData"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/controllers.UploadResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/files/{id}": {
            "get": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "根据文件ID下载或预览；支持 Range/304。query: download=1 为附件下载，否则 inline 预览。服务端会在成功响应时为该文件的下载次数 +1，并通过响应头 `X-Download-Count` 回传最新次数。",
                "produces": [
                    "application/octet-stream"
                ],
                "tags": [
                    "Files"
                ],
                "summary": "下载/预览文件",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "文件ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "1=attachment; 省略或0=inline",
                        "name": "download",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "响应头包含 X-Download-Count、ETag、Last-Modified 等",
                        "schema": {
                            "type": "file"
                        },
                        "headers": {
                            "X-Download-Count": {
                                "type": "string",
                                "description": "最新下载次数"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    }
                }
            },
            "delete": {
                "security": [
                    {
                        "BearerAuth": []
                    }
                ],
                "description": "根据ID删除当前用户的文件（先删磁盘，再删数据库）；文件不存在将被忽略以便幂等。",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Files"
                ],
                "summary": "删除文件",
                "parameters": [
                    {
                        "type": "integer",
                        "description": "文件ID",
                        "name": "id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    },
                    "401": {
                        "description": "Unauthorized",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "Forbidden",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    },
                    "404": {
                        "description": "Not Found",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/me": {
            "get": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Me"
                ],
                "summary": "获取当前用户名",
                "responses": {
                    "200": {
                        "description": "示例：{\\\"username\\\":\\\"alice\\\"}",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        },
        "/proxy": {
            "get": {
                "description": "从白名单中的图片源以浏览器头伪装拉取资源，透传 Content-Type，并设置 Cache-Control: public, max-age=3600。",
                "produces": [
                    "application/octet-stream"
                ],
                "tags": [
                    "image",
                    "proxy"
                ],
                "summary": "代理获取图片（透传 Content-Type，缓存 1 小时）",
                "parameters": [
                    {
                        "type": "string",
                        "example": "https%3A%2F%2Fmat1.gtimg.com%2Fsome%2Fimage.jpg",
                        "description": "源图片 URL（需 URL 编码且域名在白名单内）",
                        "name": "url",
                        "in": "query",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "图片字节流",
                        "schema": {
                            "type": "file"
                        },
                        "headers": {
                            "Cache-Control": {
                                "type": "string",
                                "description": "public, max-age=3600"
                            },
                            "Content-Type": {
                                "type": "string",
                                "description": "image/jpeg | image/png | image/webp | image/avif"
                            }
                        }
                    },
                    "400": {
                        "description": "missing url parameter / invalid url / url too long",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    },
                    "403": {
                        "description": "host is not allowed",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    },
                    "500": {
                        "description": "internal",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    },
                    "502": {
                        "description": "fetch failed / upstream non-200",
                        "schema": {
                            "$ref": "#/definitions/controllers.ErrorResponse"
                        }
                    }
                }
            }
        },
        "/rmb-top10/refresh": {
            "post": {
                "security": [
                    {
                        "Bearer": []
                    }
                ],
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "Exchange"
                ],
                "summary": "手动刷新人民币 Top10 汇率（写入 Redis，TTL=24h）",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": {
                                "type": "string"
                            }
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "controllers.ArticleResp": {
            "type": "object",
            "properties": {
                "created_at": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "likes": {
                    "type": "integer"
                },
                "preview": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                }
            }
        },
        "controllers.CalculatorRequest": {
            "type": "object",
            "required": [
                "expression"
            ],
            "properties": {
                "expression": {
                    "description": "计算表达式",
                    "type": "string"
                }
            }
        },
        "controllers.CalculatorResponse": {
            "type": "object",
            "properties": {
                "error": {
                    "type": "string"
                },
                "result": {
                    "type": "string"
                }
            }
        },
        "controllers.CitySummary": {
            "type": "object",
            "properties": {
                "aqi": {
                    "type": "integer"
                },
                "aqi_name": {
                    "type": "string"
                },
                "city": {
                    "type": "string"
                },
                "county": {
                    "type": "string"
                },
                "degree": {
                    "type": "string"
                },
                "error": {
                    "description": "错误信息",
                    "type": "string"
                },
                "province": {
                    "type": "string"
                },
                "tomorrow_max": {
                    "type": "string"
                },
                "tomorrow_min": {
                    "type": "string"
                },
                "updated_at": {
                    "type": "string"
                },
                "weather": {
                    "type": "string"
                },
                "weather_url": {
                    "description": "天气的图标url",
                    "type": "string"
                }
            }
        },
        "controllers.CreateArticleDTO": {
            "type": "object",
            "required": [
                "content",
                "preview",
                "title"
            ],
            "properties": {
                "content": {
                    "type": "string"
                },
                "preview": {
                    "type": "string"
                },
                "title": {
                    "type": "string",
                    "maxLength": 200,
                    "minLength": 1
                }
            }
        },
        "controllers.DisplayResp": {
            "type": "object",
            "properties": {
                "endPoint": {
                    "$ref": "#/definitions/controllers.P"
                },
                "mapData": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "ok": {
                    "type": "boolean"
                },
                "path": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/controllers.P"
                    }
                },
                "startPoint": {
                    "$ref": "#/definitions/controllers.P"
                }
            }
        },
        "controllers.ErrorResponse": {
            "type": "object",
            "properties": {
                "error": {
                    "type": "string"
                }
            }
        },
        "controllers.FileItem": {
            "type": "object",
            "properties": {
                "content_type": {
                    "type": "string"
                },
                "created_at": {
                    "type": "string"
                },
                "downloads": {
                    "type": "integer"
                },
                "fileinfo": {
                    "type": "string"
                },
                "filename": {
                    "type": "string"
                },
                "hash": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "path": {
                    "description": "相对 key（不暴露真实磁盘根）",
                    "type": "string"
                },
                "size_bytes": {
                    "type": "integer"
                }
            }
        },
        "controllers.Game2048SaveRequest": {
            "type": "object",
            "required": [
                "score"
            ],
            "properties": {
                "score": {
                    "type": "integer",
                    "minimum": 0
                }
            }
        },
        "controllers.LBEntry": {
            "type": "object",
            "properties": {
                "rank": {
                    "description": "1-based",
                    "type": "integer"
                },
                "score": {
                    "type": "integer"
                },
                "user_id": {
                    "type": "integer"
                },
                "username": {
                    "type": "string"
                }
            }
        },
        "controllers.ListFilesResponse": {
            "type": "object",
            "properties": {
                "items": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/controllers.FileItem"
                    }
                },
                "page": {
                    "type": "integer"
                },
                "page_size": {
                    "type": "integer"
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "controllers.LoginDTO": {
            "type": "object",
            "required": [
                "password",
                "username"
            ],
            "properties": {
                "password": {
                    "type": "string"
                },
                "username": {
                    "type": "string"
                }
            }
        },
        "controllers.P": {
            "type": "object",
            "properties": {
                "x": {
                    "type": "integer"
                },
                "y": {
                    "type": "integer"
                }
            }
        },
        "controllers.TranslationRequest": {
            "type": "object",
            "required": [
                "target_lang",
                "text"
            ],
            "properties": {
                "model": {
                    "type": "string"
                },
                "source_lang": {
                    "type": "string"
                },
                "target_lang": {
                    "type": "string"
                },
                "text": {
                    "type": "string"
                }
            }
        },
        "controllers.TranslationResponse": {
            "type": "object",
            "properties": {
                "model": {
                    "type": "string"
                },
                "original_text": {
                    "type": "string"
                },
                "source_lang": {
                    "type": "string"
                },
                "target_lang": {
                    "type": "string"
                },
                "translated_text": {
                    "type": "string"
                }
            }
        },
        "controllers.UpdateArticleDTO": {
            "type": "object",
            "properties": {
                "content": {
                    "type": "string"
                },
                "preview": {
                    "type": "string"
                },
                "title": {
                    "type": "string"
                }
            }
        },
        "controllers.UploadResponse": {
            "type": "object",
            "properties": {
                "id": {
                    "type": "integer"
                },
                "msg": {
                    "type": "string"
                },
                "size": {
                    "type": "string"
                },
                "url": {
                    "type": "string"
                }
            }
        },
        "controllers.completeMapGameResp": {
            "type": "object",
            "properties": {
                "gameComplete": {
                    "description": "是否完成全部三轮",
                    "type": "boolean"
                },
                "message": {
                    "type": "string"
                },
                "round": {
                    "description": "当前轮次",
                    "type": "integer"
                },
                "roundTime": {
                    "description": "本轮用时（秒）",
                    "type": "number"
                },
                "saved": {
                    "description": "是否保存到数据库（仅第3轮）",
                    "type": "boolean"
                },
                "totalTime": {
                    "description": "累计总时间（秒）",
                    "type": "number"
                }
            }
        },
        "controllers.guessReq": {
            "type": "object",
            "required": [
                "number"
            ],
            "properties": {
                "number": {
                    "type": "integer",
                    "maximum": 100,
                    "minimum": 1
                }
            }
        },
        "controllers.guessResp": {
            "type": "object",
            "properties": {
                "attempts": {
                    "type": "integer"
                },
                "message": {
                    "type": "string"
                },
                "remaining": {
                    "type": "integer"
                },
                "round": {
                    "type": "integer"
                },
                "status": {
                    "description": "low/high/correct",
                    "type": "string"
                },
                "totalScore": {
                    "type": "integer"
                }
            }
        },
        "controllers.resetMapGameResp": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string"
                },
                "reset": {
                    "type": "boolean"
                }
            }
        },
        "controllers.startMapGameResp": {
            "type": "object",
            "properties": {
                "currentDistance": {
                    "type": "integer"
                },
                "difficulty": {
                    "type": "integer"
                },
                "endPoint": {
                    "$ref": "#/definitions/controllers.P"
                },
                "mapData": {
                    "description": "← 改这里",
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "message": {
                    "type": "string"
                },
                "round": {
                    "type": "integer"
                },
                "size": {
                    "type": "integer"
                },
                "startPoint": {
                    "$ref": "#/definitions/controllers.P"
                },
                "totalTime": {
                    "type": "number"
                }
            }
        }
    }
}